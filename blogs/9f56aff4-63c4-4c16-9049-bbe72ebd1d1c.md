---
uuid: 9f56aff4-63c4-4c16-9049-bbe72ebd1d1c
description: 
title: [HTTP] HTTP 메시지 구조와 상태코드
tags: [ HTTP ]
date: 2022-03-05T15:00:00.000Z
---








## HTTP 메시지

![Untitled](https://vault-r2.dorage.io/9f56aff4-63c4-4c16-9049-bbe72ebd1d1c/untitled.png)

| 메시지 헤더 | 서버와 클라이언트가 꼭 처리해야 하는 요청과 응답 내용과 속성 등 |
| --- | --- |
| CR + LF | CR (Carriage return) : 0x0d
LF (Line Feed) : 0x0a |
| 메시지 바디 | 꼭 전송되는 데이터 그 자체 |

### 요청 라인

메소드와 리퀘스트 URI와 HTTP 버전이 포함

```
GET dorage.io HTTP/1.1
```

### 상태 라인

리스폰스 결과를 나타내는 상태 코드와 설명, 사용하는 HTTP 버전이 포함

```
HTTP/1.1 200 OK
```

## 인코딩

인코딩을 실시함으로써 전송 효율을 높일 수 있다.

### 메시지 바디와 엔티티 바디의 차이

- 메시지
    
    HTTP 통신의 기본 단위로 옥텟 신퀀스(8bit)로 구성되고 통신을 통해서 전송된다.
    
- 엔티티
    
    요청과 응답의 페이로드(payload)로 전송되는 정보로 엔티티 헤더 필드와 엔티티 바디로 구성된다.
    

HTTP 메시지 바디의 역할은 요청과 응답에 관한 엔티티 바디를 운반하는 일이다.

기본적으로 메시지 바디와 엔티티 바디의 내용은 같지만 전송 코딩이 적용된 경우 엔티티 바디의 내용이 변화하기 때문에 메시지 바디와 달라진다.

### 콘텐츠 코딩

엔티티 정보를 유지한 채 작게 압축해서 송신한다.

콘텐츠 코딩된 엔티티는 수신한 클라이언트 측에서 디코딩 하게 된다.

다음과 같은 압축 방식이 있다.

- gzip (GNU zip)
- compress (UNIX의 표준 압축)
- deflate (zlib)
- identity (인코딩 없음)

### 청크 전송 코딩

사이즈가 큰 데이터를 전송하는 경우에 데이터를 분할해서 조금씩 표시할 수 있다.

엔티티 바디를 분할하는 기능을 청크 전송 코딩 (Chunk Transfer Coding) 이라 부른다.

청크 전송 코딩은 엔티티 바디를 청크로 분해한 뒤, 청크 사이를 16진수로 사용해서 단락을 표시하고 엔티티 바디 끝에 “0(CR+LF)”를 기록해둔다.

### 멀티파트

하나의 메시지 바디 내부에 엔티티를 여러 개 포함시켜 보낼 수 있다. 주로 이미지나 텍스트 파일 등을 업로드할 때 사용되고 있다.

다음과 같은 멀티파트가 있다.

- multipart/form-data
    
    폼으로부터 파일 업로드에 사용된다.
    
- multipart/byteranges
    
    상태 코드 206 응답 메시지가 복수 범위의 내용을 포함하는 때에 사용된다.
    

HTTP 메시지로 멀티파트를 사용할 때는 Content-type 헤더 필드를 사용한다.

### 레인지 리퀘스트

다운로드 중 커넥션이 끊어지게 되면 처음부터 다시 다운로드를 해야 한다.

이러한 문제를 해결하기 위해 레인지 리퀘스트가 등장하게 되었다.

레인지 리퀘스트를 사용하면 10,000 바이트 크기의 리소스에서 5,001~10,000 바이트 범위 만을 요청할 수 있다.

### 콘텐츠 네고시에이션

같은 내용이지만 사용자 환경에 맞는 최적의 콘텐츠를 되돌려주는 것을 콘텐츠 네고시에이션 이라고 한다.

콘텐츠 네고시에이션은 제공하는 리소스를 언어와 문자 세트, 인코딩 방식 등을 기준으로 판단하고 있다.

- Accept
- Accept-Charset
- Accept-Encoding
- Accept-Language
- Content-Language

콘텐츠 네고시에이션은 다음과 같은 종류가 있다.

- 서버 구동형 네고시에이션(Server-driven Negotiation)
    
    서버 측에서 콘텐츠 네고시에이션을 하는 방식이다. 서버 측에서 리퀘스트 헤더 필드의 정보를 참고해서 자동적으로 처리를 한다.
    
    단, 브라우저가 보내는 정보를 바탕으로 하기 때문에 유저에게 정말로 적절한지는 알 수 없다.
    
- 에이전트 구동형 네고시에이션(Agent-driven Negotiation)
    
    사용자에게 선택권을 주는 방식이다.
    
    브라우저에 표시된 선택지 중 유저가 선택한다.
    
- 트랜스페어런트 네고시에이션(Transparent Negotiation)
    
    서버 구동형과 에이전트 구동형을 혼합한 것으로, 서버와 클라이언트가 각각 콘텐츠 네고시에이션을 하는 방식이다.
    

## 상태 코드

| 1xx | Informational | 리퀘스트를 받아 처리중 |
| --- | --- | --- |
| 2xx | Success | 리퀘스트를 정상적으로 처리함 |
| 3xx | Redirection | 리퀘스트를 완료하기 위해서 추가 동작이 필요 |
| 4xx | Client Error | 서버는 리퀘스트 이해 불가능 |
| 5xx | Server Error | 서버는 리퀘스트 처리 실패 |

상태 코드와 실제 상태는 불일치 할 수 있다.