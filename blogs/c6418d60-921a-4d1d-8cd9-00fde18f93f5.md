---
uuid: c6418d60-921a-4d1d-8cd9-00fde18f93f5
description: 
title: 브라우저의 렌더링과정
tags: [web, javascript]
date: 2021-02-14T15:00:00.000Z
---







URL을 통해 서버에 요청된 파일을 클라이언트로 응답한다.

### HTTP 1.0과 2.0

[도메인 샤딩과 HTTP/2](%E1%84%83%E1%85%A9%E1%84%86%E1%85%A6%E1%84%8B%E1%85%B5%E1%86%AB%20%E1%84%89%E1%85%A3%E1%84%83%E1%85%B5%E1%86%BC%E1%84%80%E1%85%AA%20HTTP%202%20aec7a8403275418fa15e0509ae320515.md)

### HTML 파싱

1. 바이트를 응답받음
2. meta 태그의 charset 어트리뷰트에 지정된 인코딩 방식에 따라 텍스트로 변환
3. 토큰(의미를 갖는 코드의 최소의 단위)들로 분해
4. 토큰을 객체로 변환하여 노드를 생성
5. 노드들로 트리구조의 DOM을 구성

### CSS 파싱

HTML을 한 줄씩 파싱하여 DOM을 생성하던 도중 CSS를 로드하는 link / style 태그를 만나면 서버에 css파일을 요청한다.

1. 바이트를 응답받음
2. 문자열로 변환
3. 토큰으로 분해
4. 객체로 변환하여 노드를 생성
5. 노드들로 트리구조의 CSSOM을 구성

CSS파싱이 완료되면 다시 중단된 HTML 파싱을 재개한다.

## 렌더트리 생성

**DOM 과 CSSOM 결합으로 생성되는 자료구조**

렌더링을 위한 자료구조.

브라우저화면에 렌더링되지 않는 노드 또는 CSS에 의해 렌더링되지 않는 노드는 포함되지 않는다.

![%E1%84%87%E1%85%B3%E1%84%85%E1%85%A1%E1%84%8B%E1%85%AE%E1%84%8C%E1%85%A5%E1%84%8B%E1%85%B4%20%E1%84%85%E1%85%A6%E1%86%AB%E1%84%83%E1%85%A5%E1%84%85%E1%85%B5%E1%86%BC%E1%84%80%E1%85%AA%E1%84%8C%E1%85%A5%E1%86%BC%209f9f44b78e0c49048c2f52141adb90eb/Untitled_Diagram.png](https://vault-r2.dorage.io/c6418d60-921a-4d1d-8cd9-00fde18f93f5/e1_84_87_e1_85_b3_e1_84_85_e1_85_a1_e1_84_8b_e1_85_ae_e1_84_8c_e1_85_a5_e1_84_8b_e1_85_b4_20_e1_84_85_e1_85_a6_e1_86_ab_e1_84_83_e1_85_a5_e1_84_85_e1_85_b5_e1_86_bc_e1_84_80_e1_85_aa_e1_84_8c_e1_85_a5_e1_86_bc_209f9f44b78e0c49048c2f52141adb90eb_untitled_diagram_png.png)

레이아웃/페인트가 다시 수행되는 경우

- JS에 의한 노드 추가/삭제
- 창 리사이즈에 따른 뷰포트 크기 변경
- HTML요소의 레이아웃(크기, 위치)를 변경하는 스타일 변경

리렌더링은 고비용의 작업으로 빈번하게 발생하지 않도록 주의해야한다.

### JS 파싱

JS의 파싱은 렌더링 엔진이 아닌 JS엔진이 한다.

JS를 파싱하면 AST(Abstract Syntax Tree, 추상적 구문 트리) 가 생성된다.

그리고 AST를 기반으로 인터프리터가 실행할 수 있는 중간코드인 바이트코드가 생성되며 실행한다.

![%E1%84%87%E1%85%B3%E1%84%85%E1%85%A1%E1%84%8B%E1%85%AE%E1%84%8C%E1%85%A5%E1%84%8B%E1%85%B4%20%E1%84%85%E1%85%A6%E1%86%AB%E1%84%83%E1%85%A5%E1%84%85%E1%85%B5%E1%86%BC%E1%84%80%E1%85%AA%E1%84%8C%E1%85%A5%E1%86%BC%209f9f44b78e0c49048c2f52141adb90eb/Untitled_Diagram_(1).png](https://vault-r2.dorage.io/c6418d60-921a-4d1d-8cd9-00fde18f93f5/e1_84_87_e1_85_b3_e1_84_85_e1_85_a1_e1_84_8b_e1_85_ae_e1_84_8c_e1_85_a5_e1_84_8b_e1_85_b4_20_e1_84_85_e1_85_a6_e1_86_ab_e1_84_83_e1_85_a5_e1_84_85_e1_85_b5_e1_86_bc_e1_84_80_e1_85_aa_e1_84_8c_e1_85_a5_e1_86_bc_209f9f44b78e0c49048c2f52141adb90eb_untitled_diagram_1_png.png)

**AST란?**

토큰들의 집합을 구문분석하여 생성한다.

토큰의 문법적 의미와 구조를 반영한 트리구조의 자료구조이다.

AST를 이용해 TypeScript, Babel, Prettier 같은 트랜스파일러의 구현이 가능하다.

[https://astexplorer.net/](https://astexplorer.net/)

### 리플로우와 리페인트

**리플로우**

레이아웃의 재계산

**리페인트**

재결합된 렌더트리를 다시 페인트

따라서, 레이아웃의 변경이 없다면 리페인트의 과정만 실행하게 된다.

### JS에 의한 HTML파싱 중단

HTML은 동기적으로 위에서 아래로 파싱/실행한다.

따라서 head 태그에서 DOM 조작 시도시 렌더링이 안된 상태이므로 조작이 불가능하다.

### script 태그의 async / defer 어트리뷰트

DOM 블락킹을 해결하기 위해 추가되었다.

src 어트리뷰트를 통한 로드에만 사용가능하다.

**async 어트리뷰트**

비동기적으로 로드 / 로드가 완료된 시점에서 실행한다. (HTML 파싱 중단)

**defer 어트리뷰트**

비동기적으로 로드 / HTML이 파싱 완료된 후 실행한다.
