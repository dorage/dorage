---
uuid: 48dc19c3-2a11-45b7-845b-28bf5c0c439b
description: 
title:  CORS ì—ëŸ¬ ì•„ë‹Œ CORSì—ëŸ¬
tags: [ web, serverless ]
date: 2022-02-01T15:00:00.000Z
---








Lambda + API Gateway ë¡œ ì—”ë“œí¬ì¸íŠ¸ë¥¼ ìƒì„±ì€ í–ˆë‹¤.

ë‹¤ë§Œ CORS ë¬¸ì œê°€ í•´ê²°ì´ ì•ˆë˜ì„œ ë™ë™ëŒ€ê³  ìˆë‹¤.

## **ì‹œë„ (ê¸°ë³¸ì ì¸ ì„¸íŒ…ìœ¼ë¡œ ì˜ë¯¸ ì—†ìŒ)**

- **Serverless.yaml ì—ì„œì˜ CORS ìˆ˜ì •** [https://www.serverless.com/framework/docs/providers/aws/events/http-api#cors-setup](https://www.serverless.com/framework/docs/providers/aws/events/http-api#cors-setup)
- **lambda return ê°’ì˜ ë¬¸ì œ?!**
    
    [https://towardsaws.com/blocked-by-cors-policy-no-access-control-allow-origin-error-when-creating-aws-lambda-script-67321fa4ae29](https://towardsaws.com/blocked-by-cors-policy-no-access-control-allow-origin-error-when-creating-aws-lambda-script-67321fa4ae29)
    

## í•´ê²°

ì°¬ì°¬íˆ ìƒê°í•´ë³´ì•˜ë‹¤.

ì™œ ì‹¤íŒ¨í• ê¹Œ ì´ê±´ ê³¼ì—° CORS í—ˆìš©ì˜ ë¬¸ì œì¼ê¹Œ

API GATEWAYì˜ ê°’ì´ ì œëŒ€ë¡œ ì„¤ì •ì´ ëœ ê±´ preflightì˜ Responseë¡œ ì¶©ë¶„íˆ í™•ì¸í•  ìˆ˜ ìˆì—ˆë‹¤.

 

![Untitled](https://vault-r2.dorage.io/48dc19c3-2a11-45b7-845b-28bf5c0c439b/untitled.png)

ë¬¸ì œëŠ” ê·¸ë ‡ë‹¤ë©´ OPTIONS ë©”ì„œë“œë¥¼ ì‘ë‹µí•˜ëŠ” ì²˜ë¦¬ê°€ Lambdaì—ì„œ ì•ˆë˜ê³  ìˆë‹¤ëŠ” ìƒê°ì´ ë“¤ì—ˆë‹¤.

ì—­ì‹œë‚˜ GETë§Œ ì´ë„ 500ì—ëŸ¬ê°€ ëœ¨ëŠ”ë° OPTIONSì´ ì œëŒ€ë¡œ ì²˜ë¦¬ë ë¦¬ê°€ ì—†ì—ˆê³  preflightê°€ 500ì—ëŸ¬ê°€ ë°œìƒí•˜ë‹ˆ CORSì—ëŸ¬ë¡œ ë°œìƒí•˜ëŠ”ê²ƒì´ì˜€ë‹¤. CORS ì—ëŸ¬ê°€ ì•„ë‹Œ CORSì—ëŸ¬ì˜€ë‹¤.

( ì•„ ë‚œ ë‹¹ì—°íˆ API GATEWAYì—ì„œ CORS ì„¤ì •í•˜ë©´ ì•Œì•„ì„œ í•´ê²°í•´ì£¼ëŠ”ì§€ ì•Œì•˜ì§€.. )

```jsx
function preflight() {
    return {
        statusCode: 200,
        body: `Weclome, Preflight!`,
    };
}

module.exports.cors = async (event) => {
    // structure references
    // https://docs.aws.amazon.com/apigateway/latest/developerguide/http-api-develop-integrations-lambda.html
    const {
        requestContext: {
            http: { method },
        },
    } = event;

    // preflight ì²˜ë¦¬
    if (method === 'OPTIONS') {
        return preflight();
    }

		// ì´ì™¸ì˜ ê²½ìš°ì— ëŒ€í•œ ì½”ë“œë¥¼ ì—¬ê¸°ì„œë¶€í„° ì‘ì„±
}
```

ì •ìƒ ì‘ë™í•œë‹¤. ğŸ˜
