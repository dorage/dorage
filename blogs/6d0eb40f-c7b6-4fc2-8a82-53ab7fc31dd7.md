---
uuid: 6d0eb40f-c7b6-4fc2-8a82-53ab7fc31dd7
description: 
title: [815]Â Bus Routes
tags: [ Hard, LeetCode ]
date: 2022-09-21T15:00:00.000Z
---







### ë§í¬

[Bus Routes - LeetCode](https://leetcode.com/problems/bus-routes/)

### ğŸ“ ë¬¸ì œ

You are given an arrayÂ `routes`Â representing bus routes whereÂ `routes[i]`Â is a bus route that theÂ `ith`Â bus repeats forever.

- For example, ifÂ `routes[0] = [1, 5, 7]`, this means that theÂ `0th`Â bus travels in the sequenceÂ `1 -> 5 -> 7 -> 1 -> 5 -> 7 -> 1 -> ...`Â forever.

You will start at the bus stopÂ `source`Â (You are not on any bus initially), and you want to go to the bus stopÂ `target`. You can travel between bus stops by buses only.

ReturnÂ *the least number of buses you must take to travel from*Â `source`Â *to*Â `target`. ReturnÂ `-1`Â if it is not possible.

*INPUT*

*OUTPUT*

```jsx
routes = [[1,2,7],[3,6,7]], source = 1, target = 6
```

```jsx
2
```

### ğŸš¨ ì˜¤ë¥˜

<aside>
ğŸ•§

</aside>

### âœ”ï¸ í’€ì´

ë²„ìŠ¤ ì •ë¥˜ì¥ ë³„ ë²„ìŠ¤ë¥¼ ê¸°ë¡í•˜ê³ , ëª©í‘œì§€ì ì˜ ë²„ìŠ¤ë¥¼ í™•ì¸ í›„, í•´ë‹¹ ë²„ìŠ¤ì— ë„ë‹¬í•  ë•Œê¹Œì§€ BFSë¥¼ ì§„í–‰í•œë‹¤.

BFSì§„í–‰ ë°©ì‹ì€ í˜„ì¬ ì„ íƒí•œ ë²„ìŠ¤ê°€ ê°€ëŠ” ëª¨ë“  ë…¸ì„ ì˜ ë²„ìŠ¤ë¥¼ ë‹¤ìŒ íì— ë„£ëŠ” ë°©ì‹ìœ¼ë¡œ ì§„í–‰í•œë‹¤.

```jsx
/**
 * @param {number[][]} routes
 * @param {number} source
 * @param {number} target
 * @return {number}
 */
var numBusesToDestination = function(routes, source, target) {
    if(source === target) return 0;
    const stops = [];
    
    for(let i = 0; i < routes.length; i++){
        const route = routes[i];
        for(const n of route){
            if(!stops[n]) stops[n] = [];
            stops[n].push(i);
        }
    }
    
    // ê²°ê³¼ì ìœ¼ë¡œ íƒ€ë©´ ë˜ëŠ” ë²„ìŠ¤ë²ˆí˜¸
    const targetBuses = new Set(stops[target]);
    const isTargetBus = (n) => targetBuses.has(n);
    
    let count = 0;
    const q = [...stops[source]];
    const visited = new Set();
    
    while(q.length){
        count++;
        const preq = new Set();
        while(q.length){
            const bus = q.shift();
            
            if(isTargetBus(bus)) return count;
            if(visited.has(bus)) continue;
            visited.add(bus);
            
            for(const route of routes[bus]) {
                for(const bus of stops[route]){
                    preq.add(bus);
                }
            }
        }
        q.push(...preq);
    }
    return -1;
};
```