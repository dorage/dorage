---
uuid: 590f4fdd-dd7d-41b1-90ee-51e900860089
description: 
title: 도메인 샤딩과 HTTP/2
tags: [ http ]
date: 2020-09-03T15:00:00.000Z
---








### **도메인 샤딩이란**

웹 브라우저는 각 도메인에 대하여 동시연결(Concurrent Connection)에 제한을 둔다.

[브라우저가 한 번에 1개의 도메인에서 내려받는 자원](%E1%84%87%E1%85%B3%E1%84%85%E1%85%A1%E1%84%8B%E1%85%AE%E1%84%8C%E1%85%A5%E1%84%80%E1%85%A1%20%E1%84%92%E1%85%A1%E1%86%AB%20%E1%84%87%E1%85%A5%E1%86%AB%E1%84%8B%E1%85%A6%201%E1%84%80%E1%85%A2%E1%84%8B%E1%85%B4%20%E1%84%83%E1%85%A9%E1%84%86%E1%85%A6%E1%84%8B%E1%85%B5%E1%86%AB%E1%84%8B%E1%85%A6%E1%84%89%E1%85%A5%20%E1%84%82%E1%85%A2%E1%84%85%E1%85%A7%E1%84%87%E1%85%A1%E1%86%AE%E1%84%82%E1%85%B3%E1%86%AB%20%208f5b2f291a5c4815b61e45adad183682.md)

이 제한을 피하기 위해 개발자는 여러 서브 도메인으로 나누고 동시에 여러 도메인으로부터 리소스를 다운로드하여 느린 로딩을 피한다.

### **도메인의 개수를 정하기**

샤드의 개수는 사용자가 다운로드할 때 필요한 리소스의 개수와 관련되어 있다.

모던 웹브라우저는 도메인당 평균 6개의 동시연결(Concurrent Connection)을 지원한다.

따라서 모던 웹브라우저는 30개의 리소스가 있는 웹페이지를 그릴려면 5번의 순차적인 요청이 이어야한다.  (6개 * 5번)

다만 웹브라우저들은 추가적인 도메인들과 연결유지를 위해 DNS조사를 시행하기 때문에 도메인을 추가하는것은 퍼포먼스의 저하를 일으킨다. Yahoo의 조사에 따르면 2~4개의 도메인이 적절하며, 이보다 많은 도메인은 저하된 성능을 보여준다고 한다.

### **도메인 샤딩과 HTTP/2**

구글은 무제한적인 동시요청이 가능한 프로토콜인 SPDY를 발표했었다. 하지만 이는 2016년 deprecated 되었고 HTTP/2가 발표되면서 이 자리를 대체하게 된다. HTTP/2 의 도입은 결국 도메인 샤딩가 필요없게 만들었다.

다만 구식 브라우저들은 여전히 성능 향상을 위해 도메인 샤딩에 의지한다고 한다.

**도메인 샤딩의 예**

유투브의 경우 이미지와 스크립트 리소스를 두개의 도메인 [i.ytimg.com](http://i.ytimg.com) 과 [s.ytimg.com](http://s.ytimg.com) 으로 나누어 요청을 하였다.

[i.ytimg.com](http://i.ytimg.com) 은 아이콘, 로고, 썸네일, 아바타 그리고 추가적인 비쥬얼적인 요소등의 리소스를 제공했다.

[s.ytimg.com](http://s.ytimg.com) 은 자바스크립트, CSS, 파비콘, 스프라이트시트 그리고 웹사이트 최적화 및 애널리시스를 위한 리소스들을 제공했다.

유저들은 접속을 하게되면 페이지 렌더를 위한 미디어 리소스와 스크립트들을 동시에 다운로드 받게된다.

이 아티클은 2016년도 작성된 아티클로 추가적인 정보를 찾아보시기 바랍니다.

참조

- [https://blog.stackpath.com/glossary-domain-sharding/](https://blog.stackpath.com/glossary-domain-sharding/)
