---
uuid: 0d3b85f3-ef62-4a1d-9851-d141cc0b88b0
description: 
title: [14267] íšŒì‚¬ ë¬¸í™”1
tags: [  ]
date: 2022-01-15T15:00:00.000Z
---







### ë§í¬

[https://www.acmicpc.net/problem/14267](https://www.acmicpc.net/problem/14267)

### ğŸ“ ë¬¸ì œ

![Untitled](https://vault-r2.dorage.io/0d3b85f3-ef62-4a1d-9851-d141cc0b88b0/untitled.png)

*INPUT*

*OUTPUT*

```jsx
5 3
-1 1 2 3 4
2 2
3 4
5 6
```

```jsx
0 2 6 6 12
```

### ğŸš¨ ì˜¤ë¥˜

<aside>
ğŸ•§

</aside>

### âœ”ï¸ í’€ì´

ì½œìŠ¤íƒì´ ì´ˆê³¼í• ê¹Œ ì²˜ìŒë¶€í„° ë°˜ë³µë¬¸ìœ¼ë¡œ í’€ì´í–ˆë‹¤.

```jsx
const readline = require('readline');

let input = [];

readline
    .createInterface({
        input: process.stdin,
        output: process.stdout,
    })
    .on('line', function (line) {
        input.push(line);
    })
    .on('close', function () {
        solution(input);
        process.exit();
    });

function solution(input) {
    const [n, m] = input.shift().split(' ').map(Number);
    const list = input.shift().split(' ').map(Number);
    const tree = [];
    const result = Array(n + 1).fill(0);

    for (let i = 1; i < n + 1; i++) {
        tree[i] = Node(i);
    }
    // root node
    tree[1].parent = -1;
    for (let i = 2; i < n + 1; i++) {
        const id = list[i - 1];
        tree[i].parent = tree[id];
        tree[id].children.push(tree[i]);
    }
    // add compliment
    for (let i = 0; i < m; i++) {
        const [id, compliment] = input[i].split(' ').map(Number);
        tree[id].compliment += compliment;
    }
    // ë‚´ë¦¬ê°ˆêµ¼
    const queue = [[1, tree[1].compliment]];
    while (queue.length) {
        const [id, compliment] = queue.pop();
        result[id] = compliment;
        for (const child of tree[id].children) {
            child.compliment += compliment;
            queue.push([child.id, child.compliment]);
        }
    }
    result.shift();
    console.log(result.join(' '));
}

function Node(id) {
    if (!new.target) return new Node(id);
    this.id = id;
    this.parent = null;
    this.children = [];
    this.compliment = 0;
}
```